<include file="default:Public:_header_common"/>
<style type="text/css">
.sanjiao {font-size: 14px;font-family: 宋体, sans-serif;height: 8px;}.sanjiao_ddd1 { position: absolute;left: 0px;top: 0px;z-index: 1;}.sanjiao_fff2 {color: #fff;position: absolute;left: 0px;top: 2px;z-index: 2;}.sanjiao_fff3 {color: #fff;position: absolute;left: 0px;top: 0px;z-index: 2;}.sanjiao_ddd4 {position: absolute;left: 0px;top: 2px;z-index: 1;}
</style>
</head><body>
<include file="default:Public:_header_main"/>
<div class="user-page">
    <div class="user-main clearfix">
                                                      <include file="default:Public:_left"/>
<script type="text/javascript">
	var nowset = "{$vo.tipset}";
	function SetAll(obj, aid) {
		var ids = "#" + obj;
		for (var i = 1; i <= 3; i++) {
			if ($(ids + i).attr("disabled") == "disabled") {
				continue;
			}
			$(ids + i).attr("checked", "checked");
		}
		$(aid).html("取消");
		$(aid).attr("href", "javascript:SetAllOff('" + obj + "','" + aid + "');");
	}
	function SetAllOff(obj, aid) {
		var ids = "#" + obj;
		for (var i = 1; i <= 3; i++) {
			if ($(ids + i).attr("disabled") == "disabled") {
				continue;
			}
			$(ids + i).removeAttr("checked");
		}
		$(aid).html("全选");
		$(aid).attr("href", "javascript:SetAll('" + obj + "','" + aid + "');")
	}
	function SetStates(v) {
		return;
		var ids1 = "#chk" + v + "_1";
		var ids2 = "#chk" + v + "_2";
		var ids3 = "#chk" + v + "_3";
		var ads1 = "#aset" + v;
		if (($(ids1).attr("checked") == "checked") && ($(ids2).attr("checked") == "checked") && ($(ids3).attr("checked") == "checked")) {
			if ($(ids3).attr("disabled") == "disabled") {
				$(ids3).removeAttr("checked");
			}
			$(ads1).attr("href", "javascript:SetAllOff('chk" + v + "_','#aset" + v + "');");
			$(ads1).html("取消");
		} else if (($(ids1).attr("checked") == "checked") && ($(ids2).attr("checked") == "checked") && $(ids3).attr("disabled") == "disabled") {
			$(ads1).attr("href", "javascript:SetAllOff('chk" + v + "_','#aset" + v + "');");
			$(ads1).html("取消");
		} else {
			$(ads1).html("全选");
			$(ads1).attr("href", "javascript:SetAll('chk" + v + "_','#aset" + v + "');");
		}
	}
	function Initstate(id) {
		var ids1 = "#" + id;
		$(ids1).attr("checked","checked");
	}
</script>

    	<!--通知设置begin-->    
        <div class="user-con">
            <div class="user-box-1 user-notifications-setting">
            	<div class="user-box-title-1 clearfix">
                	<h2>通知设置</h2>
                </div>
                <div class="user-box-con-1">
                    <form id="notificationForm" novalidate="novalidate">
                    <input id="ps" type="hidden" value="{$status.phone_status}">
                    <input id="es" type="hidden" value="{$status.email_status}">
                	<table width="100%" style="text-align:center;">
                      <tbody><tr class="odd-line">
                        <td width="25%">通知类型</td>
                        <td width="25%">邮件通知</td>
                        <td width="25%">系统消息通知</td>
                        <td width="25%">短信通知</td>
                      </tr>
                      <foreach name="remind" item="vo" key='k1'>
                      	<foreach name="vo" item="it" key='k2'>
	                      <tr class="{$k1} even-line">
	                        <td>{$k2}</td>
	                        <td><label style="display:block"><input name="{$it[0]}" id="{$it[0]}" type="checkbox"></label></td>
	                        <td><label style="display:block"><input name="{$it[1]}" id="{$it[1]}" type="checkbox"></label></td>
	                        <td><label style="display:block"><input name="{$it[2]}" id="{$it[2]}" type="checkbox"></label></td>
	                      </tr>
	                    </foreach>
                      </foreach>
                      <tr style="background: #eee;">
                      	<td>全选/反选</td>
                      	<td><input name="email" id="email" type="checkbox"></td>
                      	<td><input name="msg" id="msg" type="checkbox"></td>
                      	<td><input name="mobile" id="mobile" type="checkbox"></td>
                      </tr>
                    </tbody></table>
                    <div class="btn-con-1 clearfix">
                    	<input id="btnSubmit" type="button" value="确认提交" class="btn-style-3 allbgcolor">
                    	<input id="btnclear" type="reset" value="选项重置" class="btn-style-4" style="margin-left:10px;">
                    	<input id="btnall" type="button" value="选项全选" class="btn-style-4" style="margin-left:10px;">
                    </div>
                    </form>
                    <div class="form-warm-prompt-1 clearfix" style=" margin:0 auto; margin-top:20px;">
                        <span class="form-warm-prompt-title">温馨提示：</span>
                        <span class="form-warm-prompt-con">
                            1. &nbsp;&nbsp;为了您的资金安全，不建议您去掉重要的消息提醒。<br>
                            2. &nbsp;&nbsp;如果您更换了邮箱，手机号，请您及时到 安全设置 页面修改。<br>
                            3. &nbsp;&nbsp;使用过程遇到问题，请联系客服，<?php $dw_kefu=get_qq(2);echo($dw_kefu[0]["qq_num"]); ?>。
                        </span>
                    </div>
                </div>
            </div>
        </div>
      </div>
    </div>
    <!--通知设置end-->
<include file="default:Public:_footer" group="Home"/>
<script type="text/javascript">
	var ps = $("#ps").val();
	var es = $("#es").val();
	if (es!=1){
		for(var w=0;w<30;w++){
			$("body").find("#chk"+w+"_1").removeAttr("checked").attr('disabled',true);
		}
		$("body").find("#email").removeAttr("checked").attr('disabled',true);
	}
	if (ps!=1){
		for(var w=0;w<30;w++){
			$("body").find("#chk"+w+"_3").removeAttr("checked").attr('disabled',true);
		}
		$("body").find("#mobile").removeAttr("checked").attr('disabled',true);
	}
	$(document).ready(function() {
		$("#btnSubmit").click(function() {
			var arrays = new Array();
			var objs = document.getElementsByTagName("input");
			for (var i = 0; i < objs.length; i++) {
				if (objs.item(i).type == 'checkbox') {
					var id = "#" + objs.item(i).id;
					if ($(id).attr("checked") == 'checked') {
						arrays.push(objs.item(i).id);
					}
				}
			}
			var str = '';
			for (var j = 0; j < arrays.length; j++) {
				str += arrays[j] + ",";
			}
			$.post("__URL__/savetip", {Params: str }, function(data) {
				if (data > 0) {
					layer.alert('您好，您的操作已保存成功！', {icon: 1}, function(index){
					    layer.close(index);
					    window.location.reload();
					});
				}
				else {
					layer.alert('您好，您的操作失败，请重新尝试！', {icon: 2}, function(index){
					    layer.close(index);
					    window.location.reload();
					});
				}
			});
		});
	});
	
	function Initial() {
		var arr = nowset.split(",");
		var size = arr.length;
		for (var i = 0; i < size; i++) {
			Initstate(arr[i]);
		}
	}
	Initial();
	$("#btnclear").click(function() {
		var arrays = new Array();
		var objs = document.getElementsByTagName("input");
		for (var i = 0; i < objs.length; i++) {
			if (objs.item(i).type == 'checkbox') {
				var id = "#" + objs.item(i).id;
				$(id).removeAttr("checked");
			}
		}
	});

	$("#btnall").click(function() {
		var arrays = new Array();
		var objs1 = document.getElementsByTagName("input");
		for (var i = 0; i < objs1.length; i++) {
			if (objs1.item(i).type == 'checkbox' && objs1.item(i).disabled != true) {
				var id = "#" + objs1.item(i).id;
				$(id).attr('checked',"checked");
			}
		}
	});
	$("#email").click(function() {
		if($("#email").attr('checked')){
			for(var w=0;w<30;w++){
				$("body").find("#chk"+w+"_1").attr('checked',"checked");
			}
		}else{
			for(var w=0;w<30;w++){
				$("body").find("#chk"+w+"_1").removeAttr("checked");
			}
		}
	});
	$("#msg").click(function() {
		if($("#msg").attr('checked')){
			for(var w=0;w<30;w++){
				$("body").find("#chk"+w+"_2").attr('checked',"checked");
			}
		}else{
			for(var w=0;w<30;w++){
				$("body").find("#chk"+w+"_2").removeAttr("checked");
			}
		}
	});
	$("#mobile").click(function() {
		if($("#mobile").attr('checked')){
			for(var w=0;w<30;w++){
				$("body").find("#chk"+w+"_3").attr('checked',"checked");
			}
		}else{
			for(var w=0;w<30;w++){
				$("body").find("#chk"+w+"_3").removeAttr("checked");
			}
		}
	});
</script>

<script id="promptTmpl" type="text/x-dot-template">
    <div class="ps1-close">×</div>
    <div class="ps1-con ps2-con cf">
        <div class="ps1-title">
            <h2>{{=it[0]}}</h2>
        </div>
        <div class="state-prompt-txt-{{?it[3]}}duigou{{??}}cuowu{{?}} clearfix">
            <div class="state-prompt-style">
                <h2>{{=it[1]}}</h2>
                {{=it[2]}}
                您可以<a href="__ROOT__/member/" target="_blank" class="state-a-line">[返回我的账户]</a>
            </div>
        </div>
    </div>
</script>
<script src="__ROOT__/Style/M/js/common.js"></script>
<script src="__ROOT__/Style/M/js/remind.js"></script>
</body>
</html>