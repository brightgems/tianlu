<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>联系方式</title>
    <link rel="stylesheet" href="__ROOT__/Style/NewWeChat/css/amazeui.css">
    <link rel="stylesheet" href="__ROOT__/Style/NewWeChat/css/app.css">
    <link rel="stylesheet" href="__ROOT__/Style/NewWeChat/css/member.css">
    <link type="text/css" href="__ROOT__/Style/NewWeChat/css/jquery.toastmessage.css" rel="stylesheet" />
    <script type="text/javascript" src="__ROOT__/Style/NewWeChat/js/jquery.min.js"></script>
    <script type="text/javascript" src="__ROOT__/Style/NewWeChat/js/jquery.toastmessage.js"></script>
    <script src="__ROOT__/Style/NewWeChat/js/amazeui.min.js"></script>
    <script src="__ROOT__/Style/NewWeChat/js/app.js"></script>
</head>

<body>
    <header>
        <h1>联系方式</h1>
        <a href="javascript:;" onClick="window.history.go(-1)" class="btn btn-goback"><i class="am-icon-chevron-left"></i></a>
    </header>
	<form action="" class="am-form am-form-horizontal form-apply">
            <div class="mod-info-shiming">
            	 <ul class="am-list mod-infon-megbg ">
                	
                	<li class="mod-info-listline">
                	<div class="am-form-group">
                        <label for="" class="am-u-sm-3  mod-info-bdshoujitxt num num-zt">一联系人</label>
                        <div class="am-u-sm-9" style="margin-top:12px;">
                            <!--<input type="text" class="am-radius" placeholder="">-->
                            <input type="text" id="contact1" value="{$vo.contact1}" class="am-radius" addstr="onkeyup='Cn_name(this)'"/>                    <div id="dvcontact1" class="inline"></div>
                        </div>
                    </div>
            		</li>

                    <li class="mod-info-listline">
                    	 <div class="am-form-group">
                            <label for="" class="am-u-sm-3  mod-info-bdshoujitxt num num-zt">联系电话</label>
                            <div class="am-u-sm-9" style="margin-top:12px;">
                                <!--<input type="text" class="am-radius" placeholder="">-->
                                <input type="text" id="contact1_tel" class="am-radius" value="{$vo.contact1_tel}" addstr="onkeyup='Blurphone(this)'" />
                               
                            </div>
                        </div>
                    </li>
                    <li class="mod-info-listline">
                        <div class="am-form-group">
                            <label for="" class="am-u-sm-3  mod-info-bdshoujitxt num num-zt">关系：</label>
                            <div class="am-u-sm-9" style="margin-top:12px;">
                               <div class="am-form-group " id="wrap1">
                                  <if condition="$vo.contact1_re eq '家庭成员'">
                                      <label class="am-radio-inline" style="margin-left:5%">
                                          <input type="radio" id="contact1_re" value="家庭成员" checked="checked" name="docInlineRadio"> 家庭成员
                                      </label>
                                      <label class="am-radio-inline">
                                          <input type="radio" id="contact1_re" value="朋友" name="docInlineRadio"> 朋友
                                      </label>
                                      <label class="am-radio-inline">
                                          <input type="radio" id="contact1_re" value="商业伙伴" name="docInlineRadio"> 商业伙伴
                                      </label>
                                  <elseif condition="$vo.contact1_re eq '朋友'" />
                                      <label class="am-radio-inline">
                                          <input type="radio" id="contact1_re" value="家庭成员" name="docInlineRadio"> 家庭成员
                                      </label>
                                      <label class="am-radio-inline">
                                          <input type="radio" id="contact1_re" value="朋友" checked="checked" name="docInlineRadio"> 朋友
                                      </label>
                                      <label class="am-radio-inline">
                                          <input type="radio" id="contact1_re" value="商业伙伴" name="docInlineRadio"> 商业伙伴
                                      </label>
                                  <elseif condition="$vo.contact1_re eq '商业伙伴'" />
                                      <label class="am-radio-inline">
                                          <input type="radio" id="contact1_re" value="家庭成员" name="docInlineRadio"> 家庭成员
                                      </label>
                                      <label class="am-radio-inline">
                                          <input type="radio" id="contact1_re" value="朋友" name="docInlineRadio"> 朋友
                                      </label>
                                      <label class="am-radio-inline">
                                          <input type="radio" id="contact1_re" value="商业伙伴" checked="checked" name="docInlineRadio"> 商业伙伴
                                      </label>
                                  <else />
                                      <label class="am-radio-inline">
                                          <input type="radio" id="contact1_re" value="家庭成员" name="docInlineRadio"> 家庭成员
                                      </label>
                                      <label class="am-radio-inline">
                                          <input type="radio" id="contact1_re" value="朋友" name="docInlineRadio"> 朋友
                                      </label>
                                      <label class="am-radio-inline">
                                          <input type="radio" id="contact1_re" value="商业伙伴" name="docInlineRadio"> 商业伙伴
                                      </label>
                                  </if>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="mod-info-listline">
                	<div class="am-form-group">
                        <label for="" class="am-u-sm-3  mod-info-bdshoujitxt num num-zt">二联系人</label>
                        <div class="am-u-sm-9" style="margin-top:12px;">
                            <!--<input type="text" class="am-radius" placeholder="">-->
                            <input id="contact2" type="text" value="{$vo.contact2}" class="am-radius" addstr="onkeyup='Cn_name(this)'"/>                 <div id="dvcontact12" class="inline"></div>
                        </div>
                    </div>
            		</li>

                    <li class="mod-info-listline">
                    	 <div class="am-form-group">
                            <label for="" class="am-u-sm-3  mod-info-bdshoujitxt num num-zt">联系电话</label>
                            <div class="am-u-sm-9" style="margin-top:12px;">
                                <!--<input type="text" class="am-radius" placeholder="">-->
                                <input type="text" id="contact2_tel" value="{$vo.contact2_tel}" class="am-radius" addstr="onkeyup='Blurphone(this)'" />
                                
                            </div>
                        </div>
                    </li>
                    <li class="mod-info-listline">
                        <div class="am-form-group">
                            <label for="" class="am-u-sm-3  mod-info-bdshoujitxt num num-zt">关系：</label>
                            <div class="am-u-sm-9" style="margin-top:12px;">
                               <div class="am-form-group " id="wrap2" style="margin-left:7%;">
                                   <if condition="$vo.contact2_re eq '家庭成员'">
                                       <label class="am-radio-inline" style="margin-left:5%">
                                           <input type="radio" value="家庭成员" checked="checked" name="docInlineRadio2"> 家庭成员
                                       </label>
                                       <label class="am-radio-inline">
                                           <input type="radio" value="朋友" name="docInlineRadio2"style="margin-left:-10px"> 朋友
                                       </label>
                                       <label class="am-radio-inline">
                                           <input type="radio" value="商业伙伴" name="docInlineRadio2"> 商业伙伴
                                       </label>
                                  <elseif condition="$vo.contact2_re eq '朋友'" />
                                       <label class="am-radio-inline">
                                           <input type="radio" value="家庭成员" name="docInlineRadio2"> 家庭成员
                                       </label>
                                       <label class="am-radio-inline">
                                           <input type="radio" value="朋友" checked="checked" name="docInlineRadio2"> 朋友
                                       </label>
                                       <label class="am-radio-inline">
                                           <input type="radio" value="商业伙伴" name="docInlineRadio2"> 商业伙伴
                                       </label>
                                  <elseif condition="$vo.contact2_re eq '商业伙伴'" />
                                       <label class="am-radio-inline">
                                           <input type="radio" value="家庭成员" name="docInlineRadio2"> 家庭成员
                                       </label>
                                       <label class="am-radio-inline">
                                           <input type="radio" value="朋友" name="docInlineRadio2"> 朋友
                                       </label>
                                       <label class="am-radio-inline">
                                           <input type="radio" value="商业伙伴" checked="checked" name="docInlineRadio2"> 商业伙伴
                                       </label>
                                  <else />
                                       <label class="am-radio-inline">
                                           <input type="radio" value="家庭成员" name="docInlineRadio2"> 家庭成员
                                       </label>
                                       <label class="am-radio-inline">
                                           <input type="radio" value="朋友" name="docInlineRadio2"> 朋友
                                       </label>
                                       <label class="am-radio-inline">
                                           <input type="radio" value="商业伙伴" name="docInlineRadio2"> 商业伙伴
                                       </label>
                                   </if>
                                </div>
                            </div>
                        </div>
                    </li>
                    
                     <div class="am-u-sm-6 am-u-sm-centered mod-infon-tijiao" style="width:100%;">
                      <!--<button type="submit" class="am-btn am-btn-block  am-radius am-btn-danger">保存</button>-->
                         <input type="button" class="am-btn am-btn-block  am-radius am-btn-danger" onclick="submits();" value="保存"/ style="width:90%;margin:0 auto;font-size:20px;">
                    </div>
                </ul>
            </div>
            </form>
    <script type="text/javascript">
        var reg_phone = /^(13|14|15|17|18)[0-9]{9}$/;
        var reg_tel = /^(0[0-9]{2,3}\-){1}([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$/;


        function submits(){   //提交信息
            //var p = makevar(['contact2_tel','contact1_tel','contact2_re','contact1_re','contact1','contact2']);

            var c1 = $("#contact1").val();      //第一联系人用户名判断
            var c2 = $("#contact2").val();      //第二联系人用户名判断
            var t1 = $("#contact1_tel").val();  //第一联系人手机号码判断
            var t2 = $("#contact2_tel").val();  //第二联系人手机号码判断
            var v1 = $('#wrap1 input[name="docInlineRadio"]:checked ').val();   //与第一联系人关系
            var v2 = $('#wrap2 input[name="docInlineRadio2"]:checked ').val();  //与第二联系人关系


            if(!(/^[\u4e00-\u9fa5]+$/.test(c1))){       //第一联系人用户名判断
                $().toastmessage('showErrorToast', '第一联系人用户名请输入汉字');
                return false;
            }


            if(!(/^[\u4e00-\u9fa5]+$/.test(c2))){       //第二联系人用户名判断
                $().toastmessage('showErrorToast', '第二联系人用户名请输入汉字');
                return false;
            }

            $("#contact1_tel").blur( function () { //第一联系人手机号码判断

                if(!((reg_phone.test(t1))||(reg_tel.test(t1)))){
                    $().toastmessage('showErrorToast', '第一联系人手机或座机号码不符合规则！');
                    return false;
                }
            });

            $("#contact2_tel").blur( function () {  //第二联系人手机号码判断

                if(!((reg_phone.test(t2))||(reg_tel.test(t2)))){
                    $().toastmessage('showErrorToast', '第二联系人手机或座机号码不符合规则！');
                    return false;
                }
            });

            if(c1 == '' || c2 == '' || t1 == '' || t2 == '' || v1 == '' || v2 == ''){
                $().toastmessage('showErrorToast', "所有资料必须全部填写");
                return false;
            }

            if(c1 == c2){
                $().toastmessage('showErrorToast', "两个联系人不能重复");
                return false;
            }else if(t1 == t2){
                $().toastmessage('showErrorToast', "两个联系人手机号码不能重复");
                return false;
            }

            $.ajax({
                url: "__URL__/editcontact/",
                data: {"contact1":c1,"contact2":c2,"contact1_tel":t1,"contact2_tel":t2,"contact1_re":v1,"contact2_re":v2},
                timeout: 5000,
                cache: false,
                type: "post",
                dataType: "json",
                success: function (d, s, r) {
                    if(d){
                        if(d.status==1){
                           $().toastmessage('showSuccessToast', d.message);
                            setTimeout(window.location = "__URL__/index",2000);
                        }
                        else  {
                            $().toastmessage('showErrorToast', d.message);
                            return false;
                        }
                    }
                }
            });
        }




        function makevar(v){
            var d={};
            for(i=0;i<v.length;i++){
                var id = v[i];
                d[id] = $("#"+id).val();
                if(!d[id]) d[id] = $("input[name='"+id+"']:checked").val();
            }
            return d;
        }


</script>
</body>

</html>

