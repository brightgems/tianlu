<!doctype html>
<html class="no-js">
<!--账户信息-单位资料页面-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>单位资料</title>
    <link rel="stylesheet" href="__ROOT__/Style/NewWeChat/css/amazeui.css">
    <link rel="stylesheet" href="__ROOT__/Style/NewWeChat/css/app.css">
    <link rel="stylesheet" href="__ROOT__/Style/NewWeChat/css/member.css">
    <link type="text/css" href="__ROOT__/Style/NewWeChat/css/jquery.toastmessage.css" rel="stylesheet" />
    <script type="text/javascript" src="__ROOT__/Style/NewWeChat/js/jquery.min.js"></script>
    <script type="text/javascript" src="__ROOT__/Style/NewWeChat/js/jquery.toastmessage.js"></script>
    <script src="__ROOT__/Style/NewWeChat/js/amazeui.min.js"></script>
    <script src="__ROOT__/Style/NewWeChat/js/app.js"></script>
</head>

<body>
    <header>
        <h1>单位资料</h1>
        <a href="__URL__/index" class="btn btn-goback"><i class="am-icon-chevron-left"></i></a>
    </header>
			<form action="" class="am-form am-form-horizontal form-apply">
            <div class="mod-info-shiming">
            	 <ul class="am-list mod-infon-megbg ">
                	
                	<li class="mod-info-listline">
                	<div class="am-form-group">
                        <label for="" class="am-u-sm-3  mod-info-bdshoujitxt num num-zt">单位名称</label>
                        <div class="am-u-sm-9" style="margin-top:12px;">
                            <input type="text" id="department_name" value="{$vo.department_name}" class="am-radius" placeholder="">
                        </div>
                    </div>
            		</li>
          
                    <li class="mod-info-listline">
                    	 <div class="am-form-group">
                            <label for="" class="am-u-sm-3  mod-info-bdshoujitxt num num-zt">联系电话</label>
                            <div class="am-u-sm-9" style="margin-top:12px;">
                                <input type="text" id="department_tel" value="{$vo.department_tel}" class="am-radius" placeholder="">
                            </div>
                        </div>
                    </li>
                    <li class="mod-info-listline">
                    	 <div class="am-form-group">
                            <label for="" class="am-u-sm-3  mod-info-bdshoujitxt num num-zt">工作地址</label>
                            <div class="am-u-sm-9" style="margin-top:12px;">
                                <input type="text" id="department_address" value="{$vo.department_address}" class="am-radius" placeholder="">
                            </div>
                        </div>
                    </li>
                    
                    <li class="mod-info-listline">
                        <div class="am-form-group">
                            <label for="" class="am-u-sm-3  mod-info-bdshoujitxt num num-zt">工作年限</label>
                            <div class="am-u-sm-9" style="margin-top:12px;">
                               <div class="am-form-group">
                                  <select id="department_year" class="am-radius">
                                    <if condition="$vo.department_year eq ''">
                                        <option value="">请选择</option>
                                    <else />
                                        <option value="{$vo.department_year}">{$vo.department_year}</option>
                                    </if>
                                    <volist name="datas" id="data">
                                        <option value="{$data}">{$data}</option>
                                    </volist>
                                  </select>
                                  <span class="am-form-caret"></span>
                                </div>
                            </div>
                        </div>
                    </li>
                    
                     <li class="mod-info-listline">
                    	 <div class="am-form-group">
                            <label for="" class="am-u-sm-3  mod-info-bdshoujitxt num num-zt">证明人</label>
                            <div class="am-u-sm-9" style="margin-top:12px;">
                                <input type="text" id="voucher_name" value="{$vo.voucher_name}" class="am-radius" placeholder="">
                            </div>
                        </div>
                    </li>
                    <li class="mod-info-listline">
                    	 <div class="am-form-group">
                            <label for="" class="am-u-sm-3  mod-info-bdshoujitxt num num-zt">证明手机</label>
                            <div class="am-u-sm-9" style="margin-top:12px;">
                                <input type="text" id="voucher_tel" value="{$vo.voucher_tel}" class="am-radius" placeholder="">
                            </div>
                        </div>
                    </li>
                    
                     <div class="am-u-sm-6 am-u-sm-centered mod-infon-tijiao" style="width:100%;">
                      <!--<button type="submit" class="am-btn am-btn-block  am-radius am-btn-danger">保存</button>-->
                         <input type="button" class="am-btn am-btn-block  am-radius am-btn-danger" onclick="editdepartment();" value="保存"/ style="width:90%;margin:0 auto;font-size:20px;">
                    </div>
                </ul>
            </div>
            </form>
            <div class="mod-info-xgmimats am-u-sm-11 am-u-sm-centered ">
           </div>
    <script type="text/javascript">


        function editdepartment(){

            t1 = $("#department_tel").val();    //单位电话
            c3 = $("#voucher_name").val();      //证明人
            v1 = $("#voucher_tel").val();       //证明人手机

            var department_name = $("#department_name").val(); //单位名称
            var department_tel = $("#department_tel").val();//单位电话
            var department_address = $("#department_address").val()//工作地址
            var department_year = $("#department_year").val();//工作年限
            var voucher_name = $("#voucher_name").val();//证明人
            var voucher_tel = $("#voucher_tel").val()//证明人手机



            if(!(/^1[0-9]{10}$/.test(v1))){     //证明人手机
                $().toastmessage('showErrorToast', '证明人手机号码不符合规则!');
                return false;
            }else if(!((/^1[0-9]{10}$/.test(t1))||(/^(0[0-9]{2,3}\-){1}([0-9]{7,8})+(\-[0-9]{1,4})?$/.test(t1)))){
                $().toastmessage('showErrorToast', '手机或座机号码不符合规则!');
                return false;
            }else if(!(/^[\u4e00-\u9fa5]+$/.test(c3))){
                $().toastmessage('showErrorToast', '证明人姓名请输入汉字!');
                return false;
            }

            if(department_name == '' || department_tel == '' || department_address == '' || department_year == '' || voucher_name == '' || voucher_tel == '' ){
                $().toastmessage('showErrorToast', '所有项不允许为空!');
                return false;
            }


            $.ajax({
                url: "__URL__/editdepartment/",
                data: {"department_name":department_name,"department_tel":department_tel,"department_address":department_address,"department_year":department_year,"voucher_name":voucher_name,"voucher_tel":voucher_tel},
                timeout: 5000,
                cache: false,
                type: "post",
                dataType: "json",
                success: function (d, s, r) {
                    if(d){
                        if(d.status==1){
                            $().toastmessage('showSuccessToast', d.message);
                            setTimeout(window.location = "__URL__/index",2000);
                        }
                        else  {
                            $().toastmessage('showErrorToast', d.message);
                            return false;
                        }
                    }
                }
            });
        }
        function makevar(v){
            var d={};
            for(i=0;i<v.length;i++){
                var id = v[i];
                d[id] = $("#"+id).val();
                if(!d[id]) d[id] = $("input[name='"+id+"']:checked").val();
            }
            return d;
        }
    </script>
</body>

</html>
body>

</html>
